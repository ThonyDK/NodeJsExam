
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">CART</h1>
     </div>
</section>

<div class="container mb-4">
    <div class="row">
        <div class="col-12">
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <!-- <th scope="col"> </th> -->
                            <th scope="col">Product</th>
                            <th scope="col" class="text-right">Price</th>
                        </tr>
                    </thead>
                    <tbody id="data-output">
                        <a class="btn btn-block btn-danger text-uppercase" id="btn-delete-all-items-id">Delete all cart</a>
                    </tbody>
                    <tbody id="data2-output">
                        
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col mb-2">
            <div class="row">
                <div class="col-sm-12  col-md-6">
                    <a class="btn btn-block btn-light" href="/productpage">Continue Shopping</a>
                </div>
                <div class="col-sm-12 col-md-6 text-right">
                    <button class="btn btn-lg btn-block btn-success text-uppercase">Checkout</button>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="../pages/cartpage/cartpage.js"></script>

<!-- Wilson prostaff raquet data and delete button where delete button dont work --> 
<script>    
function raquetData(){
    fetch("/get-raquet-data") // Dataen fetches fra endpointet der har en session med raquet data. 
        .then(res => {
            return res.json(); 
        }) 
        .then(dataresponse => {
            //console.log(dataresponse) 
            dataresponse.forEach(item => {
                const markupRaquet = `
                <tr>
                    <td>${item.product}</td>
                    <td>${item.price}<span style="margin-right: 400px"></span><!--<a class="btn btn-block btn-danger text-uppercase" id="btn-delete-prostaffraquet-id">Delete item</a>--></td>
                </tr>  
                `;
                document.querySelector("#data-output").insertAdjacentHTML('Beforeend', markupRaquet);
            });    
    })
}

raquetData() // Kalder på sessionens data per automatik  

// Kode jeg arbejder på
// ONLY TO DELETE WILSON PROSTAFF RAQUET IN CART
/*
const deleteRaquetInCartButton = document.getElementById("btn-delete-wilson-prostaff-raquet-id").addEventListener("click", deleteRaquetInCart);
function deleteRaquetInCart() { 
    console.log("Delete raquet button fungere")
    const response = fetch("/delete-wilson-prostaff-in-cart")
    .then(res => {
        return res.json();
    })
    .then(dataRes => {
                const markupR = `
                <tr>
                    <td></td>
                    <td>$<span style="margin-right: 400px"></span><a class="btn btn-block btn-danger text-uppercase" id="btn-delete-prostaffraquet-id">Delete item</a></td>
                </tr>  
                `;
                document.querySelector("#data-output").insertAdjacentHTML('Beforeend', markupR);
            })     
    .then(window.location.replace("/cartpage"))   
}*/
</script>



<!-- Script to delete all items in cart--> 
<script>
const deleteAllItemsInCartButton = document.getElementById("btn-delete-all-items-id").addEventListener("click", deleteAllItems);
function deleteAllItems() {
    console.log("Delete button fungere")
    //event.preventDefualt()
    const response = fetch("/delete-all-items-in-cart", {
        method: 'Delete'
    })
    .then(window.location.replace("/cartpage"))
    
}
</script>



<!-- Blade bag data and delete button where delete button dont work --> 
<script>
    function bladeBagData(){
    fetch("/get-bladeBag-data") 
        .then(res => {
            return res.json();
        }) 
        .then(dataresponse => {
            //console.log(dataresponse) 
            dataresponse.forEach(item => {
                const markupRaquet = `
                <tr>
                    <td>${item.product}</td>
                    <td>${item.price}<span style="margin-right: 400px"></span><!--<a class="btn btn-block btn-danger text-uppercase" id="btn-delete-prostaffraquet-id">Delete item</a>--></td>
                </tr>  
                `;
                document.querySelector("#data2-output").insertAdjacentHTML('Beforeend', markupRaquet);
            });   
    })
}

bladeBagData()

// Kode jeg arbejder på 
// ONLY TO DELETE BAG IN CART
/* 
const deleteBagInCartButton = document.getElementById("btn-delete-all-items-id").addEventListener("click", deleteBagInCart);
function deleteBagInCart() {
    console.log("Delete bag button fungere")
    const response = fetch("/delete-all-items-in-cart", {
        method: 'Delete'
    })
    .then(window.location.replace("/cartpage"))   
}*/

</script>
